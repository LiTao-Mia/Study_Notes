# 版本控制系统

## 为什么需要版本控制系统

在开发过程中，需要面对的是开发周期较长，而又经常需要对文件内容进行修改甚至是删除，同时我们又希望能够保存文件内容的历史记录，以及对文件内容操作的相关记录。

原来通过按时间进行备份来实现这些需求，但是如此管理起来会较为麻烦，所以此时就需要版本控制系统了

## 什么是版本控制系统

> 版本控制（Revision control）是一种在开发的过程中用于管理我们对文件、目录或工程等内容的修改历史，方便查看更改历史记录，备份以便恢复以前的版本的软件工程技术。
>
> 版本控制主要的功能是追踪文件的变更。它将什么时候、什么人更改了文件的什么内容等信息忠实地记录下来。
>
> 每一次文件的改变，文件版本号都将增加



## 版本控制系统分类

### 本地版本控制系统

![本地版本控制](D:\Study_Notes\imgs\本地版本控制.png)

本地版本控制系统就是在一台机器上，记录文件每次的更新变化，可以对每个版本做一个快照，或是记录补丁文件，以保证内容不会丢失，适合个人用，这就完全可以理解为单机游戏

**缺点：**如果多人开发，每个人都在不同的系统和电脑上开发，没办法协同合作

### 集中式版本控制系统

![集中式版本控制](D:\Study_Notes\imgs\集中式版本控制.png)

集中式版本控制系统的核心就是都有一个单一的集中管理的服务器（中央服务器），保存所有文件的更新版本，而协同工作的人员都是通过客户端连接到这台服务器上，获取最新的文件内容以及提交文件更新内容。

该种当时有很多的**优势**：

* 可以完成协同合作，很大程度上能够看到项目中其他人在做什么
* 管理员可以为每一个成员指定不同的权限，同时管理一个集中化的版本控制系统更为容易

**缺点：**

该种方式的缺点也较为明显，中央服务器的单点故障

`svn`就是集中式的版本控制系统

**特点：**

* 需要一个中央服务器来管理代码的版本和备份
* 所有的用户都是从中央服务器获取代码或者是将本地的代码提交到中央服务器
* 十分依赖于网络环境，如果连不上中央服务器，就无法提交和获取代码

### 分布式版本控制系统

![分布式版本控制](D:\Study_Notes\imgs\分布式版本控制.png)

分布式控制版本系统的客户端并不只是提取最新版本的文件快照，而是把代码仓库完整的镜像下载下来，这样任何一处协同工作用的服务器发生了故障，事后都可以用任何一个镜像出来的本地仓库恢复，因为每一次的提取操作，实际上都是一次对代码仓库的完整备份：

* 需要一台服务器作为代码仓库
* 每个用户电脑都是一个服务器（代码仓库），并且和代码仓库是镜像的，用户修改和获取代码都是提交到自己的服务器当中
* 无需网络就可以进行工作
* 当网络连接正常后，用户就可以选择将自己的服务器与代码仓库进行同步
* 分布式版本控制系统在管理项目时存放的不是项目版本与版本之间的差异，它存的是索引，所需磁盘空间很少，所以每个客户端都可以存放下整个项目的历史记录（极致的压缩算法、解压算法）

`git`是分布式版本控制系统



## `git`

### `git`是什么

> `git`是一款免费、开源的分布式版本控制系统，用于敏捷高效地处理或大或小的项目
>
> `git`是`Linus Torvalds`为了帮助管理Linux内核开发而开发的一个开放源码的版本控制系统

### `git`的安装

[下载地址](https://git-scm.com/download/win)

**安装步骤**



### `git`的配置

第一次需要提交操作时，需要配置提交者的用户信息

```shell
# git config user.name 用户名
# git config user.email 用户邮箱名
# 使用 --global参数，配置全局的用户名和邮箱，只需要配置一次即可
git config --global user.name LiTao
git config --global user.email 1977675165@qq.com

# 重置
git config --unset --global user.name 
git config --unset --global user.email
```

### `git`三个区

要使用`git`进行管理操作，首先需要初始化操作，初始化`git`仓库

```shell
git init
```

该命令会在当前目录下产生一个隐藏文件夹`.git`，需要说明不要随意对该文件夹下的内容进行修改

`git`仓库会被分为**三个区**

* **工作区**

书写代码的地方，其工作的目录就为工作区

* **暂存区**

暂时存储的区域，在`git`中，代码无法直接从工作区提交到仓库区，而是需要先从工作区添加到暂存区，然后再从暂存区提交到仓库区。

暂存区的目的是避免误操作

* **本地仓库**

### `git `基本命令

#### `git --version`

作用：查看`git`版本

```shell
git --version
```

#### `clear`

作用：清屏

```shell
clear
```

#### `git init`

作用：本地仓库初始化

```shell
# 初始化本地仓库，在当前目录下会生成一个隐藏文件夹.git
git init
```

#### `git add`

* 作用：将该文件由**工作区**添加到**暂存区**，在`git`中，文件无法直接从工作区添加到仓库区，必须先从工作区添加到暂存区，再从暂存区添加到本地仓库中
* 命令格式：`git add 文件名/目录名`

```shell
# 将index.html添加到暂存区
git add index.html

# 将css目录中所有的文件添加到暂存区
git add css

# 将当前目录下所有的js文件添加到暂存区
git add *.js

# 添加当前目录下所有的文件
git add .
git add -A
git add --all
```

#### `git commit`

* 作用：将文件由**暂存区**添加到**仓库区**，并生成版本号

```shell
# 将文件由暂存区提交到本地仓库
git commit -m "提交说明"

# 如果不写提交说明，会进入vi编辑器，没有写提交说明是提交不成功的
git commit    # 需要使用vi输入内容
# 退出vi编辑器： 1-按esc键   2-输入  :q! 按回车即可退出

# 如果是一个已经暂存的文件，可以快速提交，如果是未暂存的文件，那么命令将不生效
git commit -a -m "提交说明"

# 修改最近的一次提交说明，如果提交说明不小心输错了，可以使用这个命令
git commit --amend -m "提交说明"
```

#### `git status`

* 作用：查看文件的状态
* 命令格式：`git status`
  * 文件名显示为红色时表示其处于工作区需要提交
  * 文件名显示为绿色时表示其处于缓存区

```shell
# 查看文件状态
git status
# 
git status -s
```

